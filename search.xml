<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>记录一次SpringBoot整合OSS依赖时启动报错</title>
      <link href="/2021/01/24/1700/"/>
      <url>/2021/01/24/1700/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>SpringBoot 2.3.3 版本整合OSS，将依赖导入后启动报错。</p><h2 id="错误信息如下："><a href="#错误信息如下：" class="headerlink" title="错误信息如下："></a>错误信息如下：</h2><p><strong>APPLICATION FAILED TO START</strong></p><p><strong>Description:</strong></p><p><strong>An attempt was made to call a method that does not exist. The attempt was made from the following location:</strong></p><p><strong>com.alibaba.cloud.context.AliCloudSdk.<init>(AliCloudSdk.java:76)……</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">Description:</span><br><span class="line"></span><br><span class="line">An attempt was made to call a method that does not exist. The attempt was made from the following location:</span><br><span class="line"></span><br><span class="line">    com.alibaba.cloud.context.AliCloudSdk.&lt;init&gt;(AliCloudSdk.java:76)</span><br><span class="line"></span><br><span class="line">The following method did not exist:</span><br><span class="line"></span><br><span class="line">    com.aliyuncs.profile.DefaultProfile.getHttpClientConfig()Lcom&#x2F;aliyuncs&#x2F;http&#x2F;HttpClientConfig;</span><br><span class="line"></span><br><span class="line">The method&#39;s class, com.aliyuncs.profile.DefaultProfile, is available from the following locations:</span><br><span class="line"></span><br><span class="line">    jar:file:&#x2F;D:&#x2F;Tools&#x2F;maven&#x2F;com&#x2F;aliyun&#x2F;aliyun-java-sdk-core&#x2F;3.4.0&#x2F;aliyun-java-sdk-core-3.4.0.jar!&#x2F;com&#x2F;aliyuncs&#x2F;profile&#x2F;DefaultProfile.class</span><br><span class="line"></span><br><span class="line">The class hierarchy was loaded from the following locations:</span><br><span class="line"></span><br><span class="line">    com.aliyuncs.profile.DefaultProfile: file:&#x2F;D:&#x2F;Tools&#x2F;maven&#x2F;com&#x2F;aliyun&#x2F;aliyun-java-sdk-core&#x2F;3.4.0&#x2F;aliyun-java-sdk-core-3.4.0.jar</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Action:</span><br><span class="line"></span><br><span class="line">Correct the classpath of your application so that it contains a single, compatible version of com.aliyuncs.profile.DefaultProfile</span><br></pre></td></tr></table></figure><h2 id="经过"><a href="#经过" class="headerlink" title="经过"></a>经过</h2><p><strong>1. 在项目整合阿里云OSS时，使用了官网 <a href="https://github.com/alibaba/aliyun-spring-boot/tree/master/aliyun-spring-boot-samples/aliyun-oss-spring-boot-sample" target="_blank" rel="noopener">GitHub</a> 上的示例，进行整合，就是直接在pom 文件中引入对应的starter</strong> </p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-oss-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><p><strong>2. 当引入后，启动程序发现报如上错误信息，大概意思就是 ==aliyun-java-sdk-core==  jar包 版本与SpringBoot 版本不兼容</strong></p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p><strong>1. 最后在 <a href="https://maven.aliyun.com/mvn/search" target="_blank" rel="noopener">阿里云的maven仓库</a>找到了个==aliyun-java-sdk-core== 高版本的依赖导入。</strong></p><p><strong>2.pom文件如下</strong></p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--阿里云oss--&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-oss-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">      <span class="comment">&lt;!--导入新的依赖--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.aliyun<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>aliyun-java-sdk-core<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">version</span>&gt;</span>4.4.5<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure><blockquote><p>一个在码农道路上孤独行走的人</p><p>微信搜索【Java猿记】</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>docker 下Oracle 12C 数据库字符集ZHS16GBK改为AL32UTF8</title>
      <link href="/2020/07/24/1351/"/>
      <url>/2020/07/24/1351/</url>
      
        <content type="html"><![CDATA[<h1 id="Oracle-数据库字符修改"><a href="#Oracle-数据库字符修改" class="headerlink" title="Oracle 数据库字符修改"></a>Oracle 数据库字符修改</h1><h2 id="1-查询-oracle-镜像名称"><a href="#1-查询-oracle-镜像名称" class="headerlink" title="1.查询 oracle 镜像名称"></a>1.查询 oracle 镜像名称</h2><p><img src="https://img-blog.csdnimg.cn/2020072414195184.png" alt="查看镜像名称"></p><h2 id="2-在-docker-下-进入-Oracle-数据库容器里"><a href="#2-在-docker-下-进入-Oracle-数据库容器里" class="headerlink" title="2. 在 docker 下 进入 Oracle 数据库容器里"></a>2. 在 docker 下 进入 Oracle 数据库容器里</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 进入oracle 容器</span></span><br><span class="line">[root@localhost ~]# docker exec -it oracl /bin/bash</span><br><span class="line"><span class="meta">#</span><span class="bash"> 切换到 oracle 用户</span></span><br><span class="line">root@e7647ff4db28:/# su oracle</span><br></pre></td></tr></table></figure><h2 id="3-使用-管理员身份登录-SQLplus"><a href="#3-使用-管理员身份登录-SQLplus" class="headerlink" title="3.使用 管理员身份登录 SQLplus"></a>3.使用 管理员身份登录 SQLplus</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 进入 oracle bin 目录下</span></span><br><span class="line">oracle@e7647ff4db28:/$ cd u01/app/oracle/product/12.1.0/xe/bin</span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用管理员身份登录SQLplus</span></span><br><span class="line">oracle@e7647ff4db28:/u01/app/oracle/product/12.1.0/xe/bin$ ./sqlplus / as sysdba</span><br><span class="line"></span><br><span class="line">SQL*Plus: Release 12.1.0.2.0 Production on Fri Jul 24 06:05:05 2020</span><br><span class="line"></span><br><span class="line">Copyright (c) 1982, 2014, Oracle.  All rights reserved.</span><br><span class="line"></span><br><span class="line">Connected to:</span><br><span class="line">Oracle Database 12c Standard Edition Release 12.1.0.2.0 - 64bit Production</span><br><span class="line"><span class="meta">SQL&gt;</span></span><br></pre></td></tr></table></figure><h2 id="4-修改字符集"><a href="#4-修改字符集" class="headerlink" title="4.修改字符集"></a>4.修改字符集</h2><ul><li>查看字符集</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select userenv(<span class="string">'language'</span>) from dual;</span></span><br><span class="line"></span><br><span class="line">USERENV('LANGUAGE')</span><br><span class="line">----------------------------------------------------</span><br><span class="line">AMERICAN_AMERICA.ZHS16GBK</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * from v<span class="variable">$nls_parameters</span>;</span></span><br><span class="line"></span><br><span class="line">PARAMETER                      VALUE                              CON_ID</span><br><span class="line">------------------------------ ------------------------------ ----------</span><br><span class="line">NLS_LANGUAGE                   AMERICAN                                0</span><br><span class="line">NLS_TERRITORY                  AMERICA                                 0</span><br><span class="line">NLS_CURRENCY                   $                                       0</span><br><span class="line">NLS_ISO_CURRENCY               AMERICA                                 0</span><br><span class="line">NLS_NUMERIC_CHARACTERS         .,                                      0</span><br><span class="line">NLS_CALENDAR                   GREGORIAN                               0</span><br><span class="line">NLS_DATE_FORMAT                DD-MON-YYYY HH24:MI:SS                  0</span><br><span class="line">NLS_DATE_LANGUAGE              AMERICAN                                0</span><br><span class="line">NLS_CHARACTERSET               ZHS16GBK                                0</span><br><span class="line">NLS_SORT                       BINARY                                  0</span><br><span class="line">NLS_TIME_FORMAT                HH.MI.SSXFF AM                          0</span><br><span class="line"></span><br><span class="line">PARAMETER                      VALUE                              CON_ID</span><br><span class="line">------------------------------ ------------------------------ ----------</span><br><span class="line">NLS_TIMESTAMP_FORMAT           DD-MON-RR HH.MI.SSXFF AM                0</span><br><span class="line">NLS_TIME_TZ_FORMAT             HH.MI.SSXFF AM TZR                      0</span><br><span class="line">NLS_TIMESTAMP_TZ_FORMAT        DD-MON-RR HH.MI.SSXFF AM TZR            0</span><br><span class="line">NLS_DUAL_CURRENCY              $                                       0</span><br><span class="line">NLS_NCHAR_CHARACTERSET         AL16UTF16                               0</span><br><span class="line">NLS_COMP                       BINARY                                  0</span><br><span class="line">NLS_LENGTH_SEMANTICS           BYTE                                    0</span><br><span class="line">NLS_NCHAR_CONV_EXCP            FALSE                                   0</span><br><span class="line"></span><br><span class="line">19 rows selected.</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * from nls_database_parameters;</span></span><br><span class="line"></span><br><span class="line">PARAMETER                      VALUE</span><br><span class="line">------------------------------ ------------------------------</span><br><span class="line">NLS_RDBMS_VERSION              12.1.0.2.0</span><br><span class="line">NLS_NCHAR_CONV_EXCP            FALSE</span><br><span class="line">NLS_LENGTH_SEMANTICS           BYTE</span><br><span class="line">NLS_COMP                       BINARY</span><br><span class="line">NLS_DUAL_CURRENCY              $</span><br><span class="line">NLS_TIMESTAMP_TZ_FORMAT        DD-MON-RR HH.MI.SSXFF AM TZR</span><br><span class="line">NLS_TIME_TZ_FORMAT             HH.MI.SSXFF AM TZR</span><br><span class="line">NLS_TIMESTAMP_FORMAT           DD-MON-RR HH.MI.SSXFF AM</span><br><span class="line">NLS_TIME_FORMAT                HH.MI.SSXFF AM</span><br><span class="line">NLS_SORT                       BINARY</span><br><span class="line">NLS_DATE_LANGUAGE              AMERICAN</span><br><span class="line"></span><br><span class="line">PARAMETER                      VALUE</span><br><span class="line">------------------------------ ------------------------------</span><br><span class="line">NLS_DATE_FORMAT                DD-MON-RR</span><br><span class="line">NLS_CALENDAR                   GREGORIAN</span><br><span class="line">NLS_NUMERIC_CHARACTERS         .,</span><br><span class="line">NLS_NCHAR_CHARACTERSET         AL16UTF16</span><br><span class="line">NLS_CHARACTERSET               ZHS16GBK</span><br><span class="line">NLS_ISO_CURRENCY               AMERICA</span><br><span class="line">NLS_CURRENCY                   $</span><br><span class="line">NLS_TERRITORY                  AMERICA</span><br><span class="line">NLS_LANGUAGE                   AMERICAN</span><br><span class="line"></span><br><span class="line">20 rows selected.</span><br></pre></td></tr></table></figure><ul><li>修改字符集</li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> shutdown immediate;</span></span><br><span class="line">Database closed.</span><br><span class="line">Database dismounted.</span><br><span class="line">ORACLE instance shut down.</span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> startup mount;</span></span><br><span class="line">ORACLE instance started.</span><br><span class="line"></span><br><span class="line">Total System Global Area 1778384896 bytes</span><br><span class="line">Fixed Size                  2925408 bytes</span><br><span class="line">Variable Size            1627393184 bytes</span><br><span class="line">Database Buffers          134217728 bytes</span><br><span class="line">Redo Buffers               13848576 bytes</span><br><span class="line">Database mounted.</span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> alter session <span class="built_in">set</span> sql_trace=<span class="literal">true</span>; </span></span><br><span class="line"></span><br><span class="line">Session altered.</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> alter system <span class="built_in">enable</span> restricted session; </span></span><br><span class="line"></span><br><span class="line">System altered.</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> alter system <span class="built_in">set</span> job_queue_processes=0; </span></span><br><span class="line"></span><br><span class="line">System altered.</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> alter system <span class="built_in">set</span> aq_tm_processes=0; </span></span><br><span class="line"></span><br><span class="line">System altered.</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> alter database open; </span></span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash">  ALTER DATABASE character <span class="built_in">set</span> INTERNAL_USE AL32UTF8;</span></span><br><span class="line"></span><br><span class="line">Database altered.</span><br><span class="line"></span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> shutdown immediate;</span></span><br><span class="line">Database closed.</span><br><span class="line">Database dismounted.</span><br><span class="line">ORACLE instance shut down.</span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> startup </span></span><br><span class="line">ORACLE instance started.</span><br><span class="line"></span><br><span class="line">Total System Global Area 1778384896 bytes</span><br><span class="line">Fixed Size                  2925408 bytes</span><br><span class="line">Variable Size            1627393184 bytes</span><br><span class="line">Database Buffers          134217728 bytes</span><br><span class="line">Redo Buffers               13848576 bytes</span><br><span class="line">Database mounted.</span><br><span class="line">Database opened.</span><br><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select * from nls_database_parameters;</span></span><br><span class="line"></span><br><span class="line">PARAMETER                      VALUE</span><br><span class="line">------------------------------ ------------------------------</span><br><span class="line">NLS_RDBMS_VERSION              12.1.0.2.0</span><br><span class="line">NLS_NCHAR_CONV_EXCP            FALSE</span><br><span class="line">NLS_LENGTH_SEMANTICS           BYTE</span><br><span class="line">NLS_COMP                       BINARY</span><br><span class="line">NLS_DUAL_CURRENCY              $</span><br><span class="line">NLS_TIMESTAMP_TZ_FORMAT        DD-MON-RR HH.MI.SSXFF AM TZR</span><br><span class="line">NLS_TIME_TZ_FORMAT             HH.MI.SSXFF AM TZR</span><br><span class="line">NLS_TIMESTAMP_FORMAT           DD-MON-RR HH.MI.SSXFF AM</span><br><span class="line">NLS_TIME_FORMAT                HH.MI.SSXFF AM</span><br><span class="line">NLS_SORT                       BINARY</span><br><span class="line">NLS_DATE_LANGUAGE              AMERICAN</span><br><span class="line"></span><br><span class="line">PARAMETER                      VALUE</span><br><span class="line">------------------------------ ------------------------------</span><br><span class="line">NLS_DATE_FORMAT                DD-MON-RR</span><br><span class="line">NLS_CALENDAR                   GREGORIAN</span><br><span class="line">NLS_NUMERIC_CHARACTERS         .,</span><br><span class="line">NLS_NCHAR_CHARACTERSET         AL16UTF16</span><br><span class="line">NLS_CHARACTERSET               AL32UTF8</span><br><span class="line">NLS_ISO_CURRENCY               AMERICA</span><br><span class="line">NLS_CURRENCY                   $</span><br><span class="line">NLS_TERRITORY                  AMERICA</span><br><span class="line">NLS_LANGUAGE                   AMERICAN</span><br><span class="line"></span><br><span class="line">20 rows selected.</span><br></pre></td></tr></table></figure><h2 id="5-其他"><a href="#5-其他" class="headerlink" title="5.其他"></a>5.其他</h2><p>​    以上字符集修改就已经完成了。如果使用客户端工具连接出现中文乱码问题，可能是操作系统字符集和 Oracle 服务器字符集不同，导致。</p><ul><li>解决方案：</li></ul><ol><li>查询服务器字符集</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> </span></span><br><span class="line">select userenv('language') from dual;</span><br><span class="line"></span><br><span class="line">USERENV('LANGUAGE')</span><br><span class="line">----------------------------------------------------</span><br><span class="line">AMERICAN_AMERICA.AL32UTF8</span><br></pre></td></tr></table></figure><ol start="2"><li>修改操作系统环境变量，步骤如下</li></ol><p><img src="https://img-blog.csdnimg.cn/20200724142015461.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNTY5NTcz,size_16,color_FFFFFF,t_70" alt="进入高级设置"></p><p><img src="https://img-blog.csdnimg.cn/20200724142142614.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNTY5NTcz,size_16,color_FFFFFF,t_70" alt="点击环境变量"></p><p>新建环境变量，点击确认即可，变量值与你刚才查出的服务器字符集一样。</p><p><img src="https://img-blog.csdnimg.cn/20200724142201726.jpg" alt="新建环境变量"></p><blockquote><p>一个在码农道路上孤独行走的人</p><p>微信搜索【Java猿记】，关注并回复【面试】即可领取283页PDF 面试资料一份。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Oracle </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记录一次Mybatis使用中遇到的BUG</title>
      <link href="/2020/06/29/2152/"/>
      <url>/2020/06/29/2152/</url>
      
        <content type="html"><![CDATA[<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>​    今天在开发过程中，由于业务需求，需要前台同时输入多个值进行模糊查询，所以我预想将输入的值，以数组形式传入，并在 Mybatis 的 xml 文件中，用 <code>foreach</code> 标签进行遍历。在遍历过程中出现了问题，后台报了一个   Mybatis 的错误。错误如下所示：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nested exception is org.apache.ibatis.builder.BuilderException: Error evaluating expression &#39;PageData.butxt&#39;.  Return value (3333) was not iterable.</span><br></pre></td></tr></table></figure><p>​    翻译过来的意思大概就是，<code>PageData.butxt</code>获取到的是值，而不是 collection ，从而无法进行迭代。。</p><h2 id="查询错误原因"><a href="#查询错误原因" class="headerlink" title="查询错误原因"></a>查询错误原因</h2><p>​    遇到这个报错，我的第一反应当然就是查看自己的代码了。</p><ul><li>controller 代码如下：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/comprehensivereport"</span>)</span><br><span class="line">   <span class="function"><span class="keyword">public</span> Result <span class="title">list</span><span class="params">(Page page)</span> </span>&#123;</span><br><span class="line">       Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(Const.MAP_NUMBER);</span><br><span class="line">       <span class="comment">//获取PageData ，PageData是一个 map 的实现</span></span><br><span class="line">       PageData pd = <span class="keyword">this</span>.getPageData();</span><br><span class="line"><span class="comment">//获取前台传过来的值</span></span><br><span class="line">       String butxt = pd.getString(<span class="string">"butxt"</span>);</span><br><span class="line">       </span><br><span class="line">       <span class="keyword">if</span> (<span class="keyword">null</span> != butxt &amp;&amp; !<span class="string">""</span>.equals(butxt)) &#123;</span><br><span class="line">           <span class="comment">//将前端传过来的字符串，使用逗号 拆分成数组</span></span><br><span class="line">           String[] split = butxt.split(<span class="string">",|，|\\s+"</span>);</span><br><span class="line">           <span class="comment">//将数组放入到PageData 对象中(map中)</span></span><br><span class="line">           pd.put(<span class="string">"butxt"</span>,split);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="comment">//将 PageData 对象存放到 Page 对象中</span></span><br><span class="line">       page.setPageData(pd);</span><br><span class="line">       <span class="comment">//调取 Service 方法。</span></span><br><span class="line">       List&lt;PageData&gt; varList = comprehensivereportService.list(page);</span><br><span class="line">       <span class="comment">//将结果存入 map 并返回</span></span><br><span class="line">       map.put(<span class="string">"varList"</span>, varList);</span><br><span class="line">       map.put(<span class="string">"pd"</span>, pd);</span><br><span class="line">       map.put(<span class="string">"Page"</span>, page);</span><br><span class="line">       <span class="keyword">return</span> ResultUtil.setrowbackresutEntity(<span class="keyword">true</span>, HttpStatus.OK.value(), ymlConfig.getServerSuccess(), map);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><ul><li>ServiceImpl 代码如下：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> List&lt;PageData&gt; <span class="title">list</span><span class="params">(Page page)</span> </span>&#123;</span><br><span class="line"> <span class="keyword">return</span> comprehensivereportMapper.datalistPage(page);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ul><li>Mapper 代码如下：</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">List&lt;PageData&gt; <span class="title">datalistPage</span><span class="params">(Page page)</span></span>;</span><br></pre></td></tr></table></figure><ul><li>xml 代码:</li></ul><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"datalistPage"</span> <span class="attr">parameterType</span>=<span class="string">"Page"</span> <span class="attr">resultType</span>=<span class="string">"com.xiye.common.entity.page.PageData"</span>&gt;</span></span><br><span class="line">        select t.bukrs,</span><br><span class="line">        t.butxt,</span><br><span class="line">        t.matnr,</span><br><span class="line">        t.maktx,</span><br><span class="line">        t.amount,</span><br><span class="line">        t.zpgzj,</span><br><span class="line">        round(case t.zpgzj</span><br><span class="line">        when '0' then</span><br><span class="line">        0</span><br><span class="line">        else</span><br><span class="line">        nvl2(t.zpgzj, (t.amount - t.zpgzj) / t.zpgzj, 0)</span><br><span class="line">        end,</span><br><span class="line">        2) * 100 yjl</span><br><span class="line">        from operate_comprehensive_report t</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"PageData.bukrs != null and PageData.bukrs != '' "</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">"item"</span> <span class="attr">index</span>=<span class="string">"index"</span> <span class="attr">collection</span>=<span class="string">"PageData.bukrs"</span> <span class="attr">open</span>=<span class="string">"AND ("</span> <span class="attr">separator</span>=<span class="string">"or"</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">                t.bukrs LIKE CONCAT(CONCAT('%', #&#123;item&#125;),'%')</span><br><span class="line">           <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>​    代码如上所示，经过查看比对，发现传过来的是一个数组呀，<code>PageData.bukrs</code> 是 map  的 key ，获取到的也是一个数组呀，为什么会报这个错误呢？？？而且使用 <code>PageData.bukrs</code> 获取的 value 只是数组里的第一条数据。前前后后的比对半天，也没有发现问题的所在，所以只能使用大招了，那就是使用百度 和Google 了，一度怀疑 Mybatis 是否可以 用map 封装数组进行遍历，但经过在Google 上查询发现，Mybatis 是可以使用map 封装数组进行遍历的。如下图，此时的我满脑袋问号？？？？？？？</p><p><img src="https://img-blog.csdnimg.cn/20200629224001848.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNTY5NTcz,size_16,color_FFFFFF,t_70" alt="网上实例"></p><p>​    就在自我怀疑时，看到了救命稻草(一个错误贴)，上面写着出现错误的原因是传入的非 list 数据，所以我就想将数组转换成 list 试一下呢？</p><p><img src="https://img-blog.csdnimg.cn/20200629224154258.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNTY5NTcz,size_16,color_FFFFFF,t_70" alt="网上贴"></p><h2 id="错误解决"><a href="#错误解决" class="headerlink" title="错误解决"></a>错误解决</h2><p>​    修改我 controller 中的代码，修改后代码如下：</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@GetMapping</span>(<span class="string">"/comprehensivereport"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> Result <span class="title">list</span><span class="params">(Page page)</span> </span>&#123;</span><br><span class="line">        Map&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;(Const.MAP_NUMBER);</span><br><span class="line">        <span class="comment">//获取PageData ，PageData是一个 map 的实现</span></span><br><span class="line">        PageData pd = <span class="keyword">this</span>.getPageData();</span><br><span class="line"><span class="comment">//获取前台传过来的值</span></span><br><span class="line">        String butxt = pd.getString(<span class="string">"butxt"</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> != butxt &amp;&amp; !<span class="string">""</span>.equals(butxt)) &#123;</span><br><span class="line">            <span class="comment">//将前端传过来的字符串，使用逗号 拆分成数组</span></span><br><span class="line">            String[] split = butxt.split(<span class="string">",|，|\\s+"</span>);</span><br><span class="line">            <span class="comment">//将数组转为list 并放入到PageData 对象中(map中)</span></span><br><span class="line">            List&lt;String&gt; list = Arrays.asList(split);</span><br><span class="line">            pd.put(<span class="string">"maktx"</span>,list);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将 PageData 对象存放到 Page 对象中</span></span><br><span class="line">        page.setPageData(pd);</span><br><span class="line">        <span class="comment">//调取 Service 方法。</span></span><br><span class="line">        List&lt;PageData&gt; varList = comprehensivereportService.list(page);</span><br><span class="line">        <span class="comment">//将结果存入 map 并返回</span></span><br><span class="line">        map.put(<span class="string">"varList"</span>, varList);</span><br><span class="line">        map.put(<span class="string">"pd"</span>, pd);</span><br><span class="line">        map.put(<span class="string">"Page"</span>, page);</span><br><span class="line">        <span class="keyword">return</span> ResultUtil.setrowbackresutEntity(<span class="keyword">true</span>, HttpStatus.OK.value(), ymlConfig.getServerSuccess(), map);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>​    修改 xml 代码如下：</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">"datalistPage"</span> <span class="attr">parameterType</span>=<span class="string">"Page"</span> <span class="attr">resultType</span>=<span class="string">"com.xiye.common.entity.page.PageData"</span>&gt;</span></span><br><span class="line">        select t.bukrs,</span><br><span class="line">        t.butxt,</span><br><span class="line">        t.matnr,</span><br><span class="line">        t.maktx,</span><br><span class="line">        t.amount,</span><br><span class="line">        t.zpgzj,</span><br><span class="line">        round(case t.zpgzj</span><br><span class="line">        when '0' then</span><br><span class="line">        0</span><br><span class="line">        else</span><br><span class="line">        nvl2(t.zpgzj, (t.amount - t.zpgzj) / t.zpgzj, 0)</span><br><span class="line">        end,</span><br><span class="line">        2) * 100 yjl</span><br><span class="line">        from operate_comprehensive_report t</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">"PageData.bukrs != null and PageData.bukrs.size &gt; 0 "</span>&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">foreach</span> <span class="attr">item</span>=<span class="string">"item"</span> <span class="attr">index</span>=<span class="string">"index"</span> <span class="attr">collection</span>=<span class="string">"PageData.bukrs"</span> <span class="attr">open</span>=<span class="string">"AND ("</span> <span class="attr">separator</span>=<span class="string">"or"</span> <span class="attr">close</span>=<span class="string">")"</span>&gt;</span></span><br><span class="line">                 t.bukrs LIKE CONCAT(CONCAT('%', #&#123;item&#125;),'%')</span><br><span class="line">            <span class="tag">&lt;/<span class="name">foreach</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure><p>​    启动项目进行测试，结果是刚才的错误没有了但又出现了一个新的错误，错误如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">org.apache.ibatis.reflection.ReflectionException: There is no getter for property named &#39;__frch_item_0&#39; in &#39;class com.XXXX&#39;</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20200629224959603.png" alt="第二个错误信息"></p><p>​    经过一顿百度操作，最终发现是 由于 <code>#{item}</code> 问题导致的，将 <code>#{item}</code> 替换成 <code>&#39;${item}&#39;</code> 问题解决。</p><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>​    经过此次 bug ，感觉自己对 Mybatis 了解还是甚少，而且上面虽然把问题解决了，但不知道其原因，日后努力学习找出此次出现 bug 的原因。</p><p>​    经历了一下午的时间，终于把 bug 解决了，还是很高兴的，记录一下，以后再次遇到无需百度了。嘻嘻</p><blockquote><p>一个在码农道路上孤独行走的人</p><p>微信搜索【Java猿记】，关注并回复【面试】即可领取283页PDF 面试资料一份。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> bug </category>
          
          <category> Mybatis </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> Mybatis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用VUE时报错：You may have an infinite update loop in watcher with expression</title>
      <link href="/2020/06/11/1610/"/>
      <url>/2020/06/11/1610/</url>
      
        <content type="html"><![CDATA[<p>今天在使用 Vue 开发过程中，前台控制台报了一个警告，经过一番百度，最终解决了问题，过程如下。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;控制台报错信息</span><br><span class="line">vue.runtime.esm.js?2b0e:619 [Vue warn]: You may have an infinite update loop in watcher with expression &quot;value&quot;</span><br></pre></td></tr></table></figure><h2 id="控制台信息"><a href="#控制台信息" class="headerlink" title="控制台信息"></a>控制台信息</h2><ul><li>控制台警告错误如图：<img src="https://img-blog.csdnimg.cn/2020061116314566.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzQyNTY5NTcz,size_16,color_FFFFFF,t_70" alt="警告图片"></li></ul><h2 id="原因"><a href="#原因" class="headerlink" title="原因"></a>原因</h2><ul><li><p>报错是因为我要给 v-for 里边的一个数组类型的 item 排序，如果是普通的绑定，用计算属性是搞定的。然而，这个牵扯到传参，计算属性用起来就不那么省心了，只能乖乖写个方法。虽然正常渲染，但是报错了：</p><p>经过一番百度，在vue issue 里边找到了尤大神的<a href="https://link.jianshu.com/?t=https://github.com/vuejs/vue/issues/1153" target="_blank" rel="noopener">回复</a>，不能直接用 sort() 函数进行排序。</p></li></ul><h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><ol><li>第一种：使用后台进行排序，前端只负责接收，展示。</li><li>第二种：将排序变量放入方法内，定义在局部变量里。</li></ol><p>问题解决。</p><blockquote><p>欢迎微信搜索【Java猿记】，关注回复【面试】获取免费面试资料。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 前端 </category>
          
          <category> Vue </category>
          
      </categories>
      
      
        <tags>
            
            <tag> bug </tag>
            
            <tag> Vue </tag>
            
            <tag> 前端 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CentOs7 docker安装Oracle 12c</title>
      <link href="/2020/06/04/1028/"/>
      <url>/2020/06/04/1028/</url>
      
        <content type="html"><![CDATA[<p>某台 Linux 服务器需要安装Oracle，但安装过程十分繁琐复杂，且一旦错误，将无法卸载干净，所以使用 Docker拉取 Oracle 镜像后安装。</p><h2 id="安装Docker："><a href="#安装Docker：" class="headerlink" title="安装Docker："></a>安装Docker：</h2><ol><li>docker 要求内核版本高于3.10，查看</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">uname -r</span><br></pre></td></tr></table></figure><ol start="2"><li>使用root权限更新yum包</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum update</span><br></pre></td></tr></table></figure><ol start="3"><li>安装docker</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum -y install docker-io</span><br></pre></td></tr></table></figure><ol start="4"><li>将docker设为开机自启动</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start docker;</span><br><span class="line">sudo systemctl enable docker;</span><br></pre></td></tr></table></figure><ol start="5"><li>测试docker是否启动完成并查看版本</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker version</span><br></pre></td></tr></table></figure><h2 id="安装Oracle12C"><a href="#安装Oracle12C" class="headerlink" title="安装Oracle12C"></a>安装Oracle12C</h2><ol><li>拉取 Oracle 镜像 <code>sath89/oracle-12c</code></li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull sath89/oracle-12c1</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20181127154558239.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RhbWlvbmV3,size_16,color_FFFFFF,t_70" alt="拉取Oracle镜像"></p><ul><li><p>下载下来5G左右</p></li><li><p>查看下载的镜像</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20181127162546446.png" alt="查看下载的镜像"></p><p>==注意：如果网慢，则多等等，还会出现一种情况，下载完2.7G的文件后，突然开始另一个文件的下载，然后卡住不动，这时直接Ctrl+C退出重新执行镜像拉取命令==</p><ol start="2"><li>安装 Oracle</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart always -d -p 8080:8080 -p 1521:1521 -v /usr/local/oracledata:/u01/app/oracle --name orac sath89/oracle-12c1</span><br></pre></td></tr></table></figure><p>会返回一串 ID 如 33c476a985358e42d2f18af5f3a0c2271325554fc7041a35b677892df1990824</p><p>然后执行命令查看安装进度</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f 33c476a985358e42d2f18af5f3a0c2271325554fc7041a35b677892df1990824</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20181127171121112.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RhbWlvbmV3,size_16,color_FFFFFF,t_70" alt="img"></p><p>这样安装完成则Ctrl+C退出，安装完成~</p><p>执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 获取运行的容器</span></span><br><span class="line">docker ps</span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行id为7485d22f2fd5容器</span></span><br><span class="line">docker exec -it 7485d22f2fd5 /bin/bash</span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用sqlplus进入Oracle，使用SQL命令行，默认为system/oracle</span></span><br><span class="line">sqlplus system/oracle@//localhost:1521/xe1</span><br></pre></td></tr></table></figure><p><img src="https://img-blog.csdnimg.cn/20181127172249511.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0RhbWlvbmV3,size_16,color_FFFFFF,t_70" alt="img"></p><p>成功。使用pl/sql连接时配置tnsname，xe是这个镜像默认的服务。</p><h2 id="安装命令解析："><a href="#安装命令解析：" class="headerlink" title="安装命令解析："></a>安装命令解析：</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">docker run --restart always -d -p 8080:8080 -p 1521:1521 -v /usr/local/oracledata:/u01/app/oracle --name orac sath89/oracle-12c</span><br><span class="line"></span><br><span class="line">1：docker run sath89/oracle-12c</span><br><span class="line">docker运行一个名为sath89/oracle-12c的镜像，如果该镜像不存在于本地，则从docker远程仓库拉取</span><br><span class="line">    </span><br><span class="line">2：--restart always</span><br><span class="line">docker容器默认为不自启，如断电等情况，会导致服务无法使用</span><br><span class="line"></span><br><span class="line">3：-p 1521:1521</span><br><span class="line">就像MySQL使用3306端口连接一样，1521是Oracle的端口,将端口进行映射。</span><br><span class="line"></span><br><span class="line">4：-v /usr/local/oracledata:/u01/app/oracle</span><br><span class="line">在docker使用数据库应注意的问题就是数据持久化，这个命令是将docker容器中安装的Oracle数据目录挂载到其他文件目录下，/u01/app/oracle是容器内oracle存放数据的位置，/usr/local/oracledata是容器挂载的其他目录，在Oracle数据库操作后文件会同步到该文件夹</span><br><span class="line"></span><br><span class="line">5：--name orac</span><br><span class="line">为该容器定义名称，否则将使用默认name1</span><br></pre></td></tr></table></figure><p>总结：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> docker默认安装目录为</span></span><br><span class="line"></span><br><span class="line">/var/lib/docker</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 列出包含已停止的容器</span></span><br><span class="line"></span><br><span class="line">docker ps -a </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动停止的容器</span></span><br><span class="line"></span><br><span class="line">docker start ba4a9b5ed8f6</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 已创建的容器修改启动策略（自动重启等）</span></span><br><span class="line">docker update --restart always orac</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 停止</span></span><br><span class="line"></span><br><span class="line">docker stop orac</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除容器</span></span><br><span class="line"></span><br><span class="line">docker rm ba4a9b5ed8f6</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除容器(同时删除数据)</span></span><br><span class="line"></span><br><span class="line">docker rm -v ba4a9b5ed8f6</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 运行容器到容器命令行界面</span></span><br><span class="line"></span><br><span class="line">docker exec -it 7485d22f2fd5 /bin/bash</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 查找文件</span></span><br><span class="line"></span><br><span class="line">find / -name tnsnames.ora</span><br></pre></td></tr></table></figure><h2 id="注意："><a href="#注意：" class="headerlink" title="注意："></a>注意：</h2><p>在虚拟机上测试时最初安装出现错误（使用logs跟踪后定位到日志文件可查看）</p><p>Specified value of sga_target 292M is too small, needs to be at least 364M<br>查看虚拟机设置的内存为1G，修改为2G后，Oracle安装成功</p><blockquote><p>原文地址：<a href="https://blog.csdn.net/ljq354004063/article/details/84578098" target="_blank" rel="noopener">原文</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> Linux </tag>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux下Oracle数据库用户建立</title>
      <link href="/2020/06/04/1021/"/>
      <url>/2020/06/04/1021/</url>
      
        <content type="html"><![CDATA[<h1 id="INUX下oracle数据库用户创建步骤"><a href="#INUX下oracle数据库用户创建步骤" class="headerlink" title="INUX下oracle数据库用户创建步骤"></a>INUX下oracle数据库用户创建步骤</h1><p>　　1）登录linux，以oracle用户登录（如果是root用户登录的，登录后用 su - oracle命令切换成oracle用户）<br>　　2）首先要打开监听器命令如下：lsnrctl start，然后sqlplus /nolog ,然后conn /as sysdba,然后startup（这一部分命令是用来打开oracle数据库）<br>　　3）查看我们常规将用户表空间放置的位置：执行如下sql：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select name from v<span class="variable">$datafile</span>;</span></span><br><span class="line"> </span><br><span class="line">NAME</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">E:\APP\ADMINISTRATOR\ORADATA\ORCL\SYSTEM01.DBF</span><br><span class="line">E:\APP\ADMINISTRATOR\ORADATA\ORCL\SYSAUX01.DBF</span><br><span class="line">E:\APP\ADMINISTRATOR\ORADATA\ORCL\UNDOTBS01.DBF</span><br><span class="line">E:\APP\ADMINISTRATOR\ORADATA\ORCL\USERS01.DBF</span><br><span class="line">E:\APP\ADMINISTRATOR\ORADATA\ORCL\EXAMPLE01.DBF</span><br><span class="line"> </span><br><span class="line">5 rows selected</span><br></pre></td></tr></table></figure><p>　　或者下面的sql语句：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">SQL&gt;</span><span class="bash"> select status,fuzzy,tablespace_name,name from v<span class="variable">$datafile_header</span>;</span></span><br><span class="line"> </span><br><span class="line">STATUS  FUZZY TABLESPACE_NAME                NAME</span><br><span class="line">------- ----- ------------------------------ --------------------------------------------------------------------------------</span><br><span class="line">ONLINE  YES   SYSTEM                         E:\APP\ADMINISTRATOR\ORADATA\ORCL\SYSTEM01.DBF</span><br><span class="line">ONLINE  YES   SYSAUX                         E:\APP\ADMINISTRATOR\ORADATA\ORCL\SYSAUX01.DBF</span><br><span class="line">ONLINE  YES   UNDOTBS1                       E:\APP\ADMINISTRATOR\ORADATA\ORCL\UNDOTBS01.DBF</span><br><span class="line">ONLINE  YES   USERS                          E:\APP\ADMINISTRATOR\ORADATA\ORCL\USERS01.DBF</span><br><span class="line">ONLINE  YES   EXAMPLE                        E:\APP\ADMINISTRATOR\ORADATA\ORCL\EXAMPLE01.DBF</span><br><span class="line"> </span><br><span class="line">5 rows selected</span><br></pre></td></tr></table></figure><p>　　上边的sql一般就将你的用户表空间文件位置查出来了，在这里是<code>E:\APP\ADMINISTRATOR\ORADATA\ORCL\</code>。</p><p>　　4）创建用户表空间：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLESPACE test datafile 'E:\APP\ADMINISTRATOR\ORADATA\ORCL\testNS.dbf'</span><br><span class="line"></span><br><span class="line">size 600M autoextend on next 50m maxsize unlimited;</span><br></pre></td></tr></table></figure><p>　　5）创建用户，指定密码和上边创建的用户表空间</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE USER testUser IDENTIFIED BY abc DEFAULT TABLESPACE test;</span><br></pre></td></tr></table></figure><p>　　6）赋予权限</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grant connect,resource,dba to testUser;</span><br></pre></td></tr></table></figure><p>　　经过以上操作，我们就可以使用testUser/abc登录指定的实例，创建我们自己的表了。</p><blockquote><p>原文地址为：<a href="https://www.cnblogs.com/ningvsban/archive/2012/10/28/2744036.html" target="_blank" rel="noopener"></a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> Oracle </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Docker安装Redis</title>
      <link href="/2020/06/04/0945/"/>
      <url>/2020/06/04/0945/</url>
      
        <content type="html"><![CDATA[<p>确保你的电脑已经安装docker并正常启动</p><h4 id="Step1-搜索redis：-docker-search-redis"><a href="#Step1-搜索redis：-docker-search-redis" class="headerlink" title="Step1:搜索redis：  docker search redis"></a>Step1:搜索redis：  <code>docker search redis</code></h4><h4 id="Step2-拉取官方镜像：docker-pull-docker-io-redis"><a href="#Step2-拉取官方镜像：docker-pull-docker-io-redis" class="headerlink" title="Step2:拉取官方镜像：docker pull docker.io/redis"></a>Step2:拉取官方镜像：<code>docker pull docker.io/redis</code></h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Using default tag: latest</span><br><span class="line">latest: Pulling from library/redis</span><br><span class="line">27833a3ba0a5: Pulling fs layer</span><br><span class="line">cde8019a4b43: Pulling fs layer</span><br><span class="line">97a473b37fb2: Pulling fs layer</span><br><span class="line">c6fe0dfbb7e3: Waiting</span><br><span class="line">39c8f5ba1240: Waiting</span><br><span class="line">cfbdd870cf75: Waiting</span><br><span class="line">latest: Pulling from library/redis</span><br><span class="line">27833a3ba0a5: Pull complete</span><br><span class="line">cde8019a4b43: Pull complete</span><br><span class="line">97a473b37fb2: Pull complete</span><br><span class="line">c6fe0dfbb7e3: Pull complete</span><br><span class="line">39c8f5ba1240: Pull complete</span><br><span class="line">cfbdd870cf75: Pull complete</span><br><span class="line">Digest: sha256:000339fb57e0ddf2d48d72f3341e47a8ca3b1beae9bdcb25a96323095b72a79b</span><br><span class="line">Status: Downloaded newer image for redis:latest</span><br></pre></td></tr></table></figure><h4 id="Step3-下载完成后，使用docker-images查看是否拉去成功："><a href="#Step3-下载完成后，使用docker-images查看是否拉去成功：" class="headerlink" title="Step3:下载完成后，使用docker images查看是否拉去成功："></a>Step3:下载完成后，使用<code>docker images</code>查看是否拉去成功：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REPOSITORY                       TAG                 IMAGE ID            CREATED             SIZE</span><br><span class="line">redis                            latest              a55fbf438dfd        8 days ago          95MB</span><br><span class="line">nginx                            latest              881bd08c0b08        4 weeks ago         109MB</span><br><span class="line">hello-world                      latest              fce289e99eb9        3 months ago        1.84kB</span><br><span class="line">alexeiled/docker-oracle-xe-11g   latest              f7304758169d        2 years ago         2.39GB</span><br></pre></td></tr></table></figure><h4 id="Step4-运行容器"><a href="#Step4-运行容器" class="headerlink" title="Step4:运行容器"></a>Step4:运行容器</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 6379:6379 -v $PWD/data:/data -d redis:latest redis-server --appendonly yes</span><br></pre></td></tr></table></figure><p>命令说明：<br> <code>docker run</code>：启动命令</p><p><code>-p 6379:6379</code> : 将容器的6379端口映射到主机的6379端口</p><p><code>-v $PWD/data:/data</code> : 将主机中当前目录下的data挂载到容器的/data<br> <code>- d</code> ： 后台运行<br> <code>redis-server --appendonly yes</code> : 在容器执行redis-server启动命令，并打开redis持久化配置</p><h4 id="Step5-使用docker-ps命令查看容器是否启动："><a href="#Step5-使用docker-ps命令查看容器是否启动：" class="headerlink" title="Step5:使用docker ps命令查看容器是否启动："></a>Step5:使用<code>docker ps</code>命令查看容器是否启动：</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS              PORTS                    NAMES</span><br><span class="line">13c589ece0eb        redis:latest        "docker-entrypoint.s…"   8 seconds ago       Up 6 seconds        0.0.0.0:6379-&gt;6379/tcp   serene_golick</span><br></pre></td></tr></table></figure><h4 id="Step6-连接、查看容器"><a href="#Step6-连接、查看容器" class="headerlink" title="Step6:连接、查看容器:"></a>Step6:连接、查看容器:</h4><p>使用redis镜像执行<code>docker exec -it 13c589ece0eb redis-cli</code>命令连接到刚启动的容器,主机IP为127.0.0.1:6379</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">127.0.0.1:6379&gt;</span> info</span><br><span class="line"><span class="comment"># Server</span></span><br><span class="line"><span class="symbol">redis_version:</span><span class="number">5.0</span>.<span class="number">4</span></span><br><span class="line"><span class="symbol">redis_git_sha1:</span><span class="number">00000000</span></span><br><span class="line"><span class="symbol">redis_git_dirty:</span><span class="number">0</span></span><br><span class="line"><span class="symbol">redis_build_id:</span>c6d7e1572d62bb79</span><br><span class="line"><span class="symbol">redis_mode:</span>standalone</span><br><span class="line"><span class="symbol">os:</span>Linux <span class="number">4.9</span>.<span class="number">125</span>-linuxkit x86_64</span><br><span class="line"><span class="symbol">arch_bits:</span><span class="number">64</span></span><br><span class="line"><span class="symbol">multiplexing_api:</span>epoll</span><br><span class="line"><span class="symbol">atomicvar_api:</span>atomic-builtin</span><br><span class="line"><span class="symbol">gcc_version:</span><span class="number">6.3</span>.<span class="number">0</span></span><br><span class="line"><span class="symbol">process_id:</span><span class="number">1</span></span><br><span class="line"><span class="symbol">run_id:</span><span class="number">6143</span>b8551da60441636d50e0fed7aeb93ee363cc</span><br><span class="line"><span class="symbol">tcp_port:</span><span class="number">6379</span></span><br><span class="line"><span class="symbol">uptime_in_seconds:</span><span class="number">73</span></span><br><span class="line"><span class="symbol">uptime_in_days:</span><span class="number">0</span></span><br><span class="line"><span class="symbol">hz:</span><span class="number">10</span></span><br><span class="line"><span class="symbol">configured_hz:</span><span class="number">10</span></span><br><span class="line"><span class="symbol">lru_clock:</span><span class="number">10846166</span></span><br><span class="line"><span class="symbol">executable:</span>/data/redis-server</span><br><span class="line"><span class="symbol">config_file:</span></span><br></pre></td></tr></table></figure><h4 id="Step7-使用redis："><a href="#Step7-使用redis：" class="headerlink" title="Step7: 使用redis："></a>Step7: 使用redis：</h4><p>添加数据，  <code>key</code> 为 username <code>value</code> 为zhangsan</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span><span class="selector-pseudo">:6379</span>&gt; <span class="selector-tag">set</span> <span class="selector-tag">username</span> <span class="selector-tag">zhangsan</span></span><br><span class="line"><span class="selector-tag">OK</span></span><br></pre></td></tr></table></figure><blockquote><p>欢迎关注微信公众号【Java猿记】，回复【面试】可领取面试资料。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> docker </category>
          
      </categories>
      
      
        <tags>
            
            <tag> docker </tag>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>通过Xshell登录vagrant虚拟机</title>
      <link href="/2020/05/23/1603/"/>
      <url>/2020/05/23/1603/</url>
      
        <content type="html"><![CDATA[<h1 id="通过-Xshell-登录-vagrant-虚拟机"><a href="#通过-Xshell-登录-vagrant-虚拟机" class="headerlink" title="通过 Xshell 登录 vagrant 虚拟机"></a>通过 Xshell 登录 vagrant 虚拟机</h1><ol><li><p>找到 vagrant 虚拟机安装目录。</p><blockquote><p>我的安装目录是 C:\Users\fuxintong\VirtualBox VMs\fuxintong_default_1589777034864_84477</p></blockquote><p> 在此目录下打开 cmd 控制台，输入 <code>vagrant ssh-config</code> 命令查看虚拟机 ssh 信息。</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[C:\Users\fuxintong\VirtualBox VMs\]$ vagrant ssh-config</span><br><span class="line">Host default</span><br><span class="line">  HostName 127.0.0.1</span><br><span class="line">  User vagrant</span><br><span class="line">  Port 2222</span><br><span class="line">  UserKnownHostsFile /dev/null</span><br><span class="line">  StrictHostKeyChecking no</span><br><span class="line">  PasswordAuthentication no</span><br><span class="line">  IdentityFile G:/xr-server/xr-server/.vagrant/machines/default/virtualbox/private_key</span><br><span class="line">  IdentitiesOnly yes</span><br><span class="line">  LogLevel FATAL</span><br></pre></td></tr></table></figure></li><li><p>打开 Xshell </p><p><img src="https://xinxiamu.github.io/2018/11/15/vagrant-Xshell/a-2.png" alt="输入用户名"></p></li></ol><p>   <img src="https://xinxiamu.github.io/2018/11/15/vagrant-Xshell/a-3.png" alt="Xsell"></p><p>   用密钥登录，浏览，文件，找到 刚刚的查询出来的 ssh 信息中的 <strong>IdentityFile</strong> 对应的地址。登录即可。</p><ol start="3"><li><p>vagrant 登陆后，切换到root账号</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[vagrant@localhost ~]$ su root</span><br></pre></td></tr></table></figure><p>修改 <code>/etc/ssh/sshd_config</code> 文件，（注意，vagrant用户下这个文件是只读的，可能什么也看不见）</p> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@localhost vagrant]# vi /etc/ssh/sshd_config</span><br></pre></td></tr></table></figure></li></ol><ul><li><p>将 ssd_config 里 <strong>PermitRootLogin</strong>属性 改为yes ，并把前面的<code>#</code> 去掉。<br><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E4%BF%AE%E6%94%B9sshd_config.png" alt="修改sshd-config"></p></li><li><p><strong>PasswordAuthentication</strong> 改为yes 并且去掉 <code>#</code><br><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E4%BF%AE%E6%94%B9sshd_config%282%29.png" alt="修改sshd-config"></p></li><li><p>输入<code>:wq</code>命令 保存并退出。</p></li><li><p>重启 sshd</p></li></ul><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> systemctl restart sshd</span></span><br></pre></td></tr></table></figure><ul><li>再通过xshell连接的时候，就可以用账号密码，root来登录了。</li></ul>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud学习之zookeeper</title>
      <link href="/2020/04/04/2030/"/>
      <url>/2020/04/04/2030/</url>
      
        <content type="html"><![CDATA[<h2 id="zookeeper-简介"><a href="#zookeeper-简介" class="headerlink" title="zookeeper 简介"></a>zookeeper 简介</h2><p>​    ZooKeeper是一种分布式协调服务，用于管理大型主机。在分布式环境中协调和管理服务是一个复杂的过程。ZooKeeper通过其简单的架构和API解决了这个问题。 ZooKeeper允许开发人员专注于核心应用程序逻辑，而不必担心应用程序的分布式特性。</p><p>​    ZooKeeper框架最初是在“Yahoo!”上构建的，用于以简单而稳健的方式访问他们的应用程序。后来，Apache ZooKeeper成为Hadoop，HBase和其他分布式框架使用的有组织服务的标准。例如，Apache HBase使用ZooKeeper跟踪分布式数据的状态。本教程将介绍ZooKeeper的基础知识，如何在分布式环境中安装和部署ZooKeeper集群，最后总结了一些使用Java编程示例和应用程序示例。</p><h2 id="zookeeper下载安装"><a href="#zookeeper下载安装" class="headerlink" title="zookeeper下载安装"></a>zookeeper下载安装</h2><ul><li><p><strong>zookeeper</strong>下载：前往官网下载即可，<a href="https://downloads.apache.org/zookeeper/zookeeper-3.6.0/apache-zookeeper-3.6.0-bin.tar.gz" target="_blank" rel="noopener">https://downloads.apache.org/zookeeper/zookeeper-3.6.0/apache-zookeeper-3.6.0-bin.tar.gz</a></p><blockquote><p>注意：一定要下载<code>apache-zookeeper-3.6.0-bin.tar.gz</code>带有 bin 的安装包，不要下载<code>apache-zookeeper-3.6.0.tar.gz</code>这个 ，下载后者会导致安装完成后无法启动zookeeper报<code>Starting zookeeper ... FAILED TO START</code>错误</p></blockquote></li><li><p>安装<strong>zookeeper</strong>之前要确保已配置好<strong>JDK</strong>环境,因为<strong>zookeeper</strong>依赖于<strong>JDK</strong>运行，建议安装<code>1.8</code>以上版本<strong>JDK</strong></p></li><li><p>将下载好的安装包，上传至<strong>linux</strong>系统中，我放在了<code>/root/soft</code>文件夹下了，该文件夹 我习惯性放置一些安装包的压缩包，然后解压后的文件夹我习惯性放在<code>/usr/zookeeper</code>文件夹下。==看个人喜好==</p></li><li><p>使用命令<code>cd /root/soft</code>进入<code>soft</code>文件夹下，使用命令<code>tar zxvf apache-zookeeper-3.6.0-bin.tar.gz</code>  进行解压。</p></li><li><p>使用命令<code>mv apache-zookeeper-3.6.0-bin /usr/zookeeper</code>将解压后文件移动至<code>/usr/zookeeper</code>文件夹</p></li><li><p>使用<code>/usr/java/apache-zookeeper-3.6.0-bin/conf</code> 进入<code>conf</code>文件夹下 ，使用命令<code>cp zoo_sample.cfg zoo.cfg</code>将<code>zoo_sample.cfg</code> 文件复制并重命名为<code>zoo.cfg</code>文件.文件中有如下属性</p>  <figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#这个时间是作为 Zookeeper 服务器之间或客户端与服务器之间维持心跳的时间间隔，也就是每个 tickTime #时间就会发送一个心跳。</span></span><br><span class="line"><span class="attr">tickTime</span>=<span class="string">2000</span></span><br><span class="line"><span class="comment"># 初始连接时能容忍的最多心跳数</span></span><br><span class="line"><span class="attr">initLimit</span>=<span class="string">10</span></span><br><span class="line"><span class="comment"># 请求和答应最多能容忍的心跳数</span></span><br><span class="line"><span class="attr">syncLimit</span>=<span class="string">5</span></span><br><span class="line"><span class="comment"># 顾名思义就是 Zookeeper 保存数据的目录，默认情况下，Zookeeper 将写数据的日志文件也保存在这个目录里。</span></span><br><span class="line"><span class="attr">dataDir</span>=<span class="string">/tmp/zookeeper</span></span><br><span class="line"><span class="comment"># 这个端口就是客户端连接 Zookeeper 服务器的端口，Zookeeper 会监听这个端口，接受客户端的访问请求。</span></span><br><span class="line"><span class="attr">clientPort</span>=<span class="string">2181</span></span><br></pre></td></tr></table></figure></li><li><p>进入bin 文件夹下 <code>/usr/java/apache-zookeeper-3.6.0-bin/bin</code></p><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#启动zookeeper</span></span><br><span class="line"><span class="meta">./zkServer.sh</span> <span class="string">start</span></span><br><span class="line"><span class="comment"># 查看ZK服务状态:</span></span><br><span class="line"><span class="meta">./zkServer.sh</span> <span class="string">status</span></span><br><span class="line"><span class="comment"># 停止ZK服务:</span></span><br><span class="line"><span class="meta">./zkServer.sh</span> <span class="string">stop</span></span><br><span class="line"><span class="comment">#重启ZK服务:     </span></span><br><span class="line"><span class="meta">./zkServer.sh</span> <span class="string">restart</span></span><br></pre></td></tr></table></figure></li><li><p>出现如图所示，表示<strong>zookeeper</strong>启动成功。</p><p>  <img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E6%89%B9%E6%B3%A8%202020-04-04%20214139.png" alt="启动成功"></p></li></ul><h2 id="向zookeeper注册服务"><a href="#向zookeeper注册服务" class="headerlink" title="向zookeeper注册服务"></a>向zookeeper注册服务</h2><ol><li><p>使用Maven建立模块<code>cloud-provider-payment8004</code></p><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/2020-04-03%20085245.png" alt="如图所示"></p><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E6%89%B9%E6%B3%A8%202020-04-04%20214701.png" alt="项目名称"></p></li><li><p>修改<code>pom</code>文件</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud2020<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud-provider-payment8004<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--SPringCloud 依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud-api-commons<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- spring-boot-starter-web 依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!--监控依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- zookeeper依赖 spring-cloud-starter-zookeeper-discovery --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zookeeper-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- SpringBoot热部署依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- lombok --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-test --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">3. 创建&#96;yml&#96;文件</span><br><span class="line"></span><br><span class="line">   &#96;&#96;&#96;yaml</span><br><span class="line">   server:</span><br><span class="line">     port: 8004</span><br><span class="line">   spring:</span><br><span class="line">     application:</span><br><span class="line">       name: cloud-provider-payment</span><br><span class="line">     cloud:</span><br><span class="line">       zookeeper:</span><br><span class="line">         connect-string: 182.92.128.143:2181 #此地址问zookeeper服务器访问地址+端口号</span><br></pre></td></tr></table></figure></li><li><p>创建主启动类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableDiscoveryClient</span><span class="comment">//加入此注解</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PaymentMain8004</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(PaymentMain8004<span class="class">.<span class="keyword">class</span>,<span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>建立测试<code>controller</code>类</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RestController</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PaymentController</span> </span>&#123;</span><br><span class="line">    <span class="comment">//直接获取yml中的端口号</span></span><br><span class="line">    <span class="meta">@Value</span>(<span class="string">"$&#123;server.port&#125;"</span>)</span><br><span class="line">    <span class="keyword">private</span> String serverPort;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@GetMapping</span>(value = <span class="string">"/payment/zk"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">paymentzk</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">//用于测试，直接在浏览器上打印出端口号+UUID随机数</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">"springcloud with zookeeper:"</span>+serverPort+<span class="string">"\t"</span>+ UUID.randomUUID().toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>启动该项目，将此服务注册进<code>zookeeper</code>服务中心</p></li><li><p>使用命令<code>./zkCli.sh</code>zookeeper客户端</p><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E6%89%B9%E6%B3%A8%202020-04-04%20220602.png" alt="如图启动成功"></p></li><li><p>使用命令<code>ls /</code>查看节点，会发现有<code>[services, zookeeper]</code>两个节点，查看<code>ls /services</code>节点如图</p><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E5%9B%BE%E5%83%8F.jpeg" alt="代表服务注册成功"></p></li><li><p>浏览器测试，出现如图表示成功。</p><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E6%89%B9%E6%B3%A8%202020-04-04%20221501.png" alt="成功"></p></li></ol><h2 id="可能出现的问题"><a href="#可能出现的问题" class="headerlink" title="可能出现的问题"></a>可能出现的问题</h2><ul><li><p>启动<code>cloud-provider-payment8004</code>时后台报错</p><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E5%9B%BE%E5%83%8F0.png" alt="错误"></p></li><li><p>原因：由于zookeeper jar包冲突导致的问题</p><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E5%9B%BE%E5%83%8F1.png" alt="问题"></p></li><li><p>解决：排除jar包</p><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.springframework.cloud/spring-cloud-starter-zookeeper-discovery --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-zookeeper-discovery<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--排除zk3.5.3--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">exclusions</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">exclusion</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">exclusion</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">exclusions</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--添加zk 3.4,9版本--&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.zookeeper/zookeeper --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.apache.zookeeper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>zookeeper<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.4.9<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure></li></ul><h2 id="公众号"><a href="#公众号" class="headerlink" title="公众号"></a>公众号</h2><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/qrcode_for_gh_4fc023042a48_258.jpg" alt="个人公众号"></p>]]></content>
      
      
      <categories>
          
          <category> SpringCloud </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> 微服务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Linux系统上安装jdk</title>
      <link href="/2020/04/04/1041/"/>
      <url>/2020/04/04/1041/</url>
      
        <content type="html"><![CDATA[<h2 id="JDK-下载"><a href="#JDK-下载" class="headerlink" title="JDK 下载"></a>JDK 下载</h2><p>​    此处以 JDk 1.8 为例</p><ul><li><p>下载 </p><p>官网：<a href="https://www.oracle.com/cn/java/technologies/javase-jdk8-downloads.html#license-lightbox" target="_blank" rel="noopener">https://www.oracle.com/cn/java/technologies/javase-jdk8-downloads.html#license-lightbox</a></p></li></ul><h2 id="JDK-安装"><a href="#JDK-安装" class="headerlink" title="JDK 安装"></a>JDK 安装</h2><ul><li>使用以上链接下载的<code>jdk-8u231-linux-x64.tar.gz</code>进行安装</li><li>现将下载的安装包上传至Linux 系统中，我使用的是<code>filezilla</code>工具进行上传的。在<code>/root</code>下新建<code>soft</code>目录，将安装包放入此目录中。在<code>/usr</code>目录下建立<code>java</code>目录用来存放解压后的文件</li><li>解压安装包：进入<code>/root/soft</code>目录下，使用<code>tar zxvf jdk-8u231-linux-x64.tar.gz</code>进行解压</li><li>将解压后的文件移动到<code>/usr/java</code>目录下：使用命令<code>cp jdk1.8.0_231 /usr/java</code> 移动到<code>java</code>目录。</li></ul><h2 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h2><ul><li>使用命令<code>vim /etc/profile</code>编辑配置文件</li><li>在文件后面加入如下内容<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">JAVA_HOME</span>=<span class="string">/usr/program/jdk1.8.0_72</span></span><br><span class="line"><span class="attr">JRE_HOME</span>=<span class="string">$JAVA_HOME/jre</span></span><br><span class="line"><span class="attr">PATH</span>=<span class="string">$PATH:$JAVA_HOME/bin</span></span><br><span class="line"><span class="attr">CLASSPATH</span>=<span class="string">.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jar</span></span><br><span class="line"><span class="attr">export</span> <span class="string">JAVA_HOME</span></span><br><span class="line"><span class="attr">export</span> <span class="string">JRE_HOME</span></span><br><span class="line"><span class="attr">export</span> <span class="string">PATH</span></span><br><span class="line"><span class="attr">export</span> <span class="string">CLASSPATH</span></span><br></pre></td></tr></table></figure></li><li>使用命令 <code>source /etc/profile</code> 进行刷新配置文件<h2 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h2>使用命令：<code>java -version</code> 如出现以下内容则代表 JDK 安装成功。</li></ul><p><img src="http://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/%E6%89%B9%E6%B3%A8%202020-04-04%20110749.png" alt="如图则成功"></p>]]></content>
      
      
      <categories>
          
          <category> Linux </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> java </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud学习(一)环境搭建</title>
      <link href="/2020/04/02/1930/"/>
      <url>/2020/04/02/1930/</url>
      
        <content type="html"><![CDATA[<h2 id="SpringCloud-介绍"><a href="#SpringCloud-介绍" class="headerlink" title="SpringCloud 介绍"></a>SpringCloud 介绍</h2><p>​    Spring Cloud为开发人员提供了快速构建分布式系统中一些常见模式的工具（例如配置管理，服务发现，断路器，智能路由，微代理，控制总线）。分布式系统的协调导致了样板模式, 使用Spring Cloud开发人员可以快速地支持实现这些模式的服务和应用程序。他们将在任何分布式环境中运行良好，包括开发人员自己的笔记本电脑，裸机数据中心，以及Cloud Foundry等托管平台。</p><h2 id="SpringCloud-环境搭建"><a href="#SpringCloud-环境搭建" class="headerlink" title="SpringCloud 环境搭建"></a>SpringCloud 环境搭建</h2><h3 id="版本号的选择"><a href="#版本号的选择" class="headerlink" title="版本号的选择"></a>版本号的选择</h3><ul><li><strong>SpringBoot版本：</strong> 2.2.2.RELEASE</li><li><strong>SpringCloud版本：</strong> Hoxton.SR1</li><li><strong>junit 版本：</strong> 4.12</li><li><strong>mysql 版本：</strong> 5.1.47</li></ul><h3 id="使用-Maven-建立父工程"><a href="#使用-Maven-建立父工程" class="headerlink" title="使用 Maven 建立父工程"></a>使用 Maven 建立父工程</h3><ol><li>创建<strong>Maven</strong>项目</li></ol><p><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/setMaven.bmp" alt="建立maven项目"></p><p><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/1585828490%281%29.jpg" alt=""></p><ol start="2"><li>修改<strong>pom</strong>文件</li></ol><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud2020<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--子模块--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modules</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>cloud-provider-payment8001<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>cloud-consumer-order80<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>cloud-api-commons<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>cloud-eureka-server7001<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>cloud-eureka-server7002<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">module</span>&gt;</span>cloud-provider-payment8002<span class="tag">&lt;/<span class="name">module</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">modules</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">packaging</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--统一管理jar包版本--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">properties</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">project.build.sourceEncoding</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.source</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.source</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">maven.compiler.target</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">maven.compiler.target</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">junit.version</span>&gt;</span>4.12<span class="tag">&lt;/<span class="name">junit.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">log4j.version</span>&gt;</span>1.2.17<span class="tag">&lt;/<span class="name">log4j.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">lombok.version</span>&gt;</span>1.16.18<span class="tag">&lt;/<span class="name">lombok.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mysql.version</span>&gt;</span>5.1.47<span class="tag">&lt;/<span class="name">mysql.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">druid.version</span>&gt;</span>1.1.16<span class="tag">&lt;/<span class="name">druid.version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mybatis.spring.boot.version</span>&gt;</span>1.3.0<span class="tag">&lt;/<span class="name">mybatis.spring.boot.version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">properties</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 子模块继承之后，提供作用：锁定版本+子modlue不用写groupId和version  --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--spring boot 2.2.2--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.2.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--spring cloud Hoxton.SR1--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>Hoxton.SR1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--spring cloud alibaba 2.1.0.RELEASE--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-alibaba-dependencies<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.1.0.RELEASE<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">type</span>&gt;</span>pom<span class="tag">&lt;/<span class="name">type</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">scope</span>&gt;</span>import<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--MySQL依赖--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mysql.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;druid.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;mybatis.spring.boot.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;junit.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>log4j<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;log4j.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;lombok.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencyManagement</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-maven-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">fork</span>&gt;</span>true<span class="tag">&lt;/<span class="name">fork</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">addResources</span>&gt;</span>true<span class="tag">&lt;/<span class="name">addResources</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> Spring </tag>
            
            <tag> 微服务 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SpringCloud学习|服务注册与发现（Eureka）</title>
      <link href="/2020/04/02/1928/"/>
      <url>/2020/04/02/1928/</url>
      
        <content type="html"><![CDATA[<h2 id="SpringCloud-简介"><a href="#SpringCloud-简介" class="headerlink" title="SpringCloud 简介"></a>SpringCloud 简介</h2><p>​    Spring Cloud为开发人员提供了快速构建分布式系统中一些常见模式的工具（例如配置管理，服务发现，断路器，智能路由，微代理，控制总线）。分布式系统的协调导致了样板模式, 使用Spring Cloud开发人员可以快速地支持实现这些模式的服务和应用程序。他们将在任何分布式环境中运行良好，包括开发人员自己的笔记本电脑，裸机数据中心，以及Cloud Foundry等托管平台。</p><h2 id="Eureka-介绍"><a href="#Eureka-介绍" class="headerlink" title="Eureka 介绍"></a>Eureka 介绍</h2><p>​    <strong>Eureka</strong>是Netflix开发的服务发现框架，本身是一个基于REST的服务，主要用于定位运行在AWS域中的中间层服务，以达到负载均衡和中间层服务故障转移的目的。SpringCloud将它集成在其子项目spring-cloud-netflix中，以实现SpringCloud的服务发现功能。</p><p>​    <strong>Eureka</strong>包含两个组件：<strong>Eureka Server</strong> 和<strong>Eureka Client</strong> 。<strong>Eureka Server</strong>提供服务注册服务，各个微服务节点通过配置启动后，会在<strong>Eureka Server</strong>中进行注册，这样<strong>Eureka Server</strong>中的服务注册表中将会存储所有可用服务节点的信息，服务节点信息可以在界面中直接看到；<strong>Eureka Client</strong>通过注册中心进行访问，是一个java客户端，用于简化与Eureka Server的交互，客户端同时也就是一个内置的、使用轮询(round-robin)负载算法的负载均衡器。</p><h2 id="Eureka-Server-搭建"><a href="#Eureka-Server-搭建" class="headerlink" title="Eureka  Server 搭建"></a>Eureka  Server 搭建</h2><h3 id="建立server-model-模块"><a href="#建立server-model-模块" class="headerlink" title="建立server model 模块"></a>建立server model 模块</h3><p><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/2020-04-03%20085245.png" alt="使用Maven建立model"></p><p><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/2020-04-03%20085342.png" alt="model模块额项目名"></p><h3 id="修改pom-文件"><a href="#修改pom-文件" class="headerlink" title="修改pom 文件"></a>修改pom 文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--继承父工程 pom 依赖--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud2020<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.springcloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud-eureka-server7001<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--因为在父工程POM 文件已经规定了各依赖的版本号，所以在子模块中不需要进行 version 声明--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入Eureka依赖 cloud/spring-cloud-starter-eureka-server --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-server<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--引入工具类依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud-api-commons<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入springboot依赖 spring-boot-starter-web --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入pring-boot-starter-actuator 监控依赖  --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 添加SpringBoot热部署依赖 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">&lt;!-- 引入lombok 依赖 --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--引入Junit 依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>junit<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="修改yml-文件"><a href="#修改yml-文件" class="headerlink" title="修改yml 文件"></a>修改yml 文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">7001</span></span><br><span class="line"></span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">instance:</span></span><br><span class="line">    <span class="attr">hostname:</span> <span class="string">localhost</span>  <span class="comment">#eureka服务端的实例名字</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">false</span>    <span class="comment">#表识不向注册中心注册自己</span></span><br><span class="line">    <span class="attr">fetch-registry:</span> <span class="literal">false</span>   <span class="comment">#表示自己就是注册中心，职责是维护服务实例，并不需要去检索服务</span></span><br><span class="line">     <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://$&#123;eureka.instance.hostname&#125;:$&#123;server.port&#125;/eureka/</span>    <span class="comment">#设置与eureka server交互的地址查询服务和注册服务都需要依赖这个地址</span></span><br></pre></td></tr></table></figure><h3 id="新建程序启动类"><a href="#新建程序启动类" class="headerlink" title="新建程序启动类"></a>新建程序启动类</h3><p>​    在主启动类上添加<code>@EnableEurekaServer</code> 代表启动服务注册</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.atguigu.springcloud;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.SpringApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;</span><br><span class="line"><span class="keyword">import</span> org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;</span><br><span class="line"></span><br><span class="line"><span class="meta">@EnableEurekaServer</span></span><br><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EurekaMain7001</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(EurekaMain7001<span class="class">.<span class="keyword">class</span>,<span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试"><a href="#测试" class="headerlink" title="测试"></a>测试</h3><p>​    在浏览器地址栏输入<code>http://localhost:7001</code>,出现以下界面，证明<strong>EurekaServer</strong>搭建成功</p><p><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/EurekaServer.bmp" alt="成功显示此界面"></p><h2 id="Eureka-Client-搭建"><a href="#Eureka-Client-搭建" class="headerlink" title="Eureka Client 搭建"></a>Eureka Client 搭建</h2><h3 id="新建生产者模块-model"><a href="#新建生产者模块-model" class="headerlink" title="新建生产者模块(model)"></a>新建生产者模块(model)</h3><p><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/2020-04-03%20091810.png" alt="搭建cloud-provider-payment8001 模块"></p><h3 id="修改pom文件"><a href="#修改pom文件" class="headerlink" title="修改pom文件"></a>修改pom文件</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">parent</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud2020<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0-SNAPSHOT<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">parent</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud-provider-payment8001<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></span><br><span class="line">       </span><br><span class="line">        <span class="comment">&lt;!--eureka-client 依赖--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.cloud<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-cloud-starter-netflix-eureka-client<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 引入自己定义的api通用包，可以使用Payment支付Entity --&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.atguigu<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>cloud-api-commons<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>$&#123;project.version&#125;<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-web<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-actuator<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mybatis.spring.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.10<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--mysql-connector-java--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>mysql<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mysql-connector-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--jdbc--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-jdbc<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-devtools<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>runtime<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.projectlombok<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>lombok<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">optional</span>&gt;</span>true<span class="tag">&lt;/<span class="name">optional</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="修改yml文件"><a href="#修改yml文件" class="headerlink" title="修改yml文件"></a>修改yml文件</h3><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">server:</span></span><br><span class="line">  <span class="attr">port:</span> <span class="number">8001</span></span><br><span class="line"><span class="attr">spring:</span></span><br><span class="line">  <span class="attr">application:</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">cloud-payment-service</span></span><br><span class="line">  <span class="attr">datasource:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line">    <span class="attr">driver-class-name:</span> <span class="string">org.gjt.mm.mysql.Driver</span></span><br><span class="line">    <span class="attr">url:</span> <span class="string">jdbc:mysql://localhost:3306/cloud?useUnicode=true&amp;characterEncoding=utf-8&amp;useSSL=false</span></span><br><span class="line">    <span class="attr">username:</span> <span class="string">root</span></span><br><span class="line">    <span class="attr">password:</span> <span class="string">root</span></span><br><span class="line"></span><br><span class="line"><span class="attr">mybatis:</span></span><br><span class="line">  <span class="attr">mapper-locations:</span> <span class="string">classpath:mapper/*.xml</span></span><br><span class="line">  <span class="attr">type-aliases-package:</span> <span class="string">com.atguigu.springcloud.entites</span>    <span class="comment"># 所有Entity别名类所在包</span></span><br><span class="line">  </span><br><span class="line"><span class="attr">eureka:</span></span><br><span class="line">  <span class="attr">client:</span></span><br><span class="line">    <span class="attr">register-with-eureka:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">fetchRegistry:</span> <span class="literal">true</span></span><br><span class="line">    <span class="attr">service-url:</span></span><br><span class="line">      <span class="attr">defaultZone:</span> <span class="string">http://localhost:7001/eureka</span> <span class="comment">#Eureka server 地址</span></span><br></pre></td></tr></table></figure><h3 id="启动类"><a href="#启动类" class="headerlink" title="启动类"></a>启动类</h3><p>​    在启动类上添加<code>@EnableEurekaClient</code>注解 ，表示此程序为Eureka Client 端</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@SpringBootApplication</span></span><br><span class="line"><span class="meta">@EnableEurekaClient</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PayMent8001</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        SpringApplication.run(PayMent8001<span class="class">.<span class="keyword">class</span>, <span class="title">args</span>)</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="测试-1"><a href="#测试-1" class="headerlink" title="测试"></a>测试</h3><p>​    先启动<strong>EurekaServer</strong>服务端(7001)，再启动<strong>EurekaClient</strong>，在浏览器地址上<code>http://localhost:7001</code>，看到如下页面则<strong>EurekaClient</strong>成功</p><p><img src="https://fuxintongoss.oss-cn-beijing.aliyuncs.com/blog/img/EurekaClient.bmp" alt="EurekaClient 成功显示如图"></p><p>至此 <strong>Eureka</strong> 搭建完毕了。</p>]]></content>
      
      
      <categories>
          
          <category> 微服务 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SpringCloud </tag>
            
            <tag> Spring </tag>
            
            <tag> 微服务 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
